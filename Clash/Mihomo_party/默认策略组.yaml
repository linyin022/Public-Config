# æ··åˆç«¯å£ HTTPå’ŒSOCKS5ç”¨ä¸€ä¸ªç«¯å£
mixed-port: 7890
# TCP å¹¶å‘è¿æ¥æ‰€æœ‰ IP, å°†ä½¿ç”¨æœ€å¿«æ¡æ‰‹çš„ TCP
tcp-concurrent: true
# è§„åˆ™æ¨¡å¼ï¼šrule/global/direct/script
mode: rule
# ipv6
ipv6: false
# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«: silent/error/warning/info/debug
log-level: info
# å…¨å±€ TLS æŒ‡çº¹
global-client-fingerprint: chrome
# åŒ¹é…æ‰€æœ‰è¿›ç¨‹ï¼ˆalways/strict/offï¼‰
find-process-mode: strict
# å»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
unified-delay: true
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
profile:
  store-selected: true
  store-fake-ip: true

geodata-mode: true
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

# tun:
#   enable: true
#   stack: mixed
#   dns-hijack: [any:53]

#DNS
dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  listen: :1053
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter: ['*', '+.lan', '+.local', '+.direct', '+.msftconnecttest.com', '+.msftncsi.com']
  default-nameserver: [system]
  nameserver: [223.5.5.5, 180.184.1.1]
  nameserver-policy:
    'geosite:cn': system
    'geosite:gfw,geolocation-!cn': [quic://223.5.5.5, quic://223.6.6.6, https://158170.alidns.com/dns-query]

#sniffer
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - +.v2ex.com

#ç­–ç•¥ç»„
proxy-groups:
  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Auto_Speed.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    name: Proxies
    type: select
    filter: ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|Hong|Hong Kong|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|TW|Tai|Taiwan|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|Japan|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore|ğŸ‡ºğŸ‡¸|ç¾å›½|US|United States
    proxies:
      - Universal

  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Telegram.png
    name: Telegram
    type: select
    include-all: true
    filter: ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|Hong|Hong Kong|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore

  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/tugepaopao/Image-Storage/master/cartoon/Cute/%23.png
    name: AI
    type: select
    include-all: true
    filter: ğŸ‡ºğŸ‡¸|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|US|United States

  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Available.png
    name: Universal
    type: select
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®|ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|Hong|Hong Kong|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|å°æ¹¾|TW|Tai|Taiwan|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|Japan|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore|ğŸ‡ºğŸ‡¸|ç¾å›½|US|United States

  - icon: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Final.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    name: GLOBAL
    type: select

#è§„åˆ™é›†
rule-providers:

  cn_asn:
    url: https://whatshub.top/rule/ASN-CN.list
    path: ./ruleset/cn_asn.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  telegram:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Repcz/Tool/X/Clash/Rules/Telegram.list
    path: ./ruleset/telegram.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  ai:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/Repcz/Tool/X/Clash/Rules/AI.list
    path: ./ruleset/ai.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  wechat:
    url: https://whatshub.top/rule/WeChat.list
    path: ./ruleset/wechat.list
    behavior: classical
    interval: 86400
    format: text
    type: http

#è§„åˆ™æ‰€å±ç­–ç•¥ç»„
rules:
  - RULE-SET,telegram,Telegram
  - RULE-SET,ai,AI
  - RULE-SET,wechat,DIRECT
  - GEOSITE,spotify,Proxies
  - GEOSITE,github,Proxies
  - GEOSITE,gfw,Proxies
  - GEOSITE,microsoft,DIRECT
  - RULE-SET,cn_asn,DIRECT
  - GEOIP,lan,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxies